! Command: show running-config
! device: Arista-5 (vEOS-lab, EOS-4.31.2F)
!
! boot system flash:/vEOS-lab.swi
!
no aaa root
!
username admin privilege 15 role network-admin secret sha512 $6$fWG7Ztv40N2tLJWV$mVppxwTo2CAqG7s86pxISrhk9vo9G2xxfXdatZiHKX2Z71ObfenihmYsiTV.kjGa6zGC2leEBB82juCeGid7P0
!
transceiver qsfp default-mode 4x10G
!
service routing protocols model multi-agent
!
hostname Arista-5
!
platform tfa
   personality arfa
!
spanning-tree mode none
!
system l1
   unsupported speed action error
   unsupported error-correction action error
!
vlan 30
!
vrf instance NLAB
   rd 64020:1
!
management api http-commands
   protocol http
   no shutdown
!
interface Ethernet1
   speed forced 10full
   no switchport
   ip address 10.200.0.14/30
   isis enable ISIS-SR
!
interface Ethernet2
   speed forced 10full
   no switchport
   ip address 10.200.0.22/30
   isis enable ISIS-SR
!
interface Ethernet3
!
interface Ethernet4
!
interface Ethernet5
   switchport access vlan 30
!
interface Ethernet6
   switchport access vlan 30
!
interface Ethernet7
!
interface Ethernet8
!
interface Ethernet9
!
interface Ethernet10
!
interface Ethernet11
!
interface Ethernet12
!
interface Loopback1
   ip address 10.0.0.45/32
   node-segment ipv4 index 45
   isis enable ISIS-SR
!
interface Management1
   ip address 172.30.240.45/16
!
interface Vlan30
   vrf NLAB
   ip address 192.168.2.1/24
!
ip routing
ip routing vrf NLAB
!
ip prefix-list NLAB-01 seq 10 permit 192.168.1.0/24
!
mpls ip
!
route-map SET-100 permit 10
   match ip address prefix-list NLAB-01
   set extcommunity color 100 additive
!
router bgp 64020
   router-id 10.0.0.45
   neighbor NLAB-CORE peer group
   neighbor NLAB-CORE remote-as 64020
   neighbor NLAB-CORE next-hop-self
   neighbor NLAB-CORE update-source Loopback1
   neighbor NLAB-CORE additional-paths receive
   neighbor NLAB-CORE additional-paths send any
   neighbor NLAB-CORE send-community standard extended
   neighbor NLAB-CORE maximum-routes 0
   neighbor 10.0.0.41 peer group NLAB-CORE
   neighbor 10.0.0.42 peer group NLAB-CORE
   neighbor 10.0.0.43 peer group NLAB-CORE
   neighbor 10.0.0.44 peer group NLAB-CORE
   !
   address-family evpn
      neighbor default encapsulation mpls next-hop-self source-interface Loopback1
      neighbor 10.0.0.41 activate
      neighbor 10.0.0.42 activate
      neighbor 10.0.0.43 activate
      neighbor 10.0.0.44 activate
   !
   vrf NLAB
      rd 64020:1
      route-target import evpn 64020:1
      route-target export evpn 64020:1
      redistribute connected
!
router traffic-engineering
   segment-routing
      color-dscp-mappings
         color 100 default
         color 200 dscp 8-40
         color 300 dscp 46
      rib system-colored-tunnel-rib
      !
      policy endpoint 10.0.0.41 color 100
         binding-sid 1000100
         name GREEN
         !
         path-group preference 1
            segment-list label-stack 900042 900044 900041
      !
      policy endpoint 10.0.0.41 color 200
         binding-sid 1000200
         name BLUE
         !
         path-group preference 1
            segment-list label-stack 900043 900044 900041
      !
      policy endpoint 10.0.0.41 color 300
         binding-sid 1000300
         name RED
         !
         path-group preference 1
            segment-list label-stack 900043 900041
!
router isis ISIS-SR
   net 20.0000.0020.0200.2045.00
   is-type level-2
   !
   address-family ipv4 unicast
   !
   segment-routing mpls
      router-id 10.0.0.45
      no shutdown
!
end
